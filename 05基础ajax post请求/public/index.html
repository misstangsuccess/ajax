<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <form action="###">
    请输入要查询的数据
    <input type="text" name="userid" id="user">
    <br>
    <button id="btn">查询</button>
  </form>
  <script>
    const oForm=document.querySelector('form');
    const oUser=document.querySelector("#user")
    //表单提交事件
    oForm.onsubmit=function(){
      //post请求
      const xhr=new XMLHttpRequest();
      //post不会读取缓存,并且请求体写在send中发送
      xhr.open("POST",`/userinfo1`,true)
      //1send中可以写urlencode编码
      xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded")
      xhr.send(`userid=${oUser.value}&pass=123`);
      //2send可以这样书写
      // xhr.setRequestHeader("Content-Type","application/json")
      // xhr.send(JSON.stringify({
      //   userid:oUser.value,
      //   pass:123,
      // }))
      xhr.onreadystatechange=function(){
        console.log(xhr.readyState)
        //判断请求状态
        if(xhr.readyState===4 && (xhr.status>199 && xhr.status<300)){
          console.log("请求成功接收数据成功")
          console.log(JSON.parse(xhr.responseText))
        }
      }
      //阻止默认事件,阻止表单提交 而是使用ajax提交 
      return false;
    }
  </script>
</body>
</html>